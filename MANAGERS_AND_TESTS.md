# π® Muscle & Blood: λ§¤λ‹μ € λ° ν…μ¤νΈ κ°μ”

μ΄ λ¬Έμ„λ” 'Muscle & Blood' κ²μ„μ μ£Όμ” λ§¤λ‹μ €λ“¤κ³Ό κ° λ§¤λ‹μ €λ¥Ό ν…μ¤νΈν•λ” λ°©λ²•μ— λ€ν•΄ μ„¤λ…ν•©λ‹λ‹¤.

---

## π› οΈ κ²μ„ λ§¤λ‹μ € κ°μ”

'Muscle & Blood' κ²μ„μ€ λ¨λ“ν™”λ μ•„ν‚¤ν…μ²λ¥Ό κΈ°λ°μΌλ΅ μ—¬λ¬ λ§¤λ‹μ €κ°€ κ°μμ μ—­ν• μ„ μν–‰ν•©λ‹λ‹¤.

### ν•µμ‹¬ μ‹μ¤ν… λ§¤λ‹μ €

* **`GameEngine`**: κ²μ„μ λ¨λ“  ν•µμ‹¬ μ‹μ¤ν…κ³Ό λ§¤λ‹μ €λ¥Ό ν†µν•©ν•κ³  κ΄€λ¦¬ν•λ” μµμƒμ„ μ—”μ§„μ…λ‹λ‹¤. κ²μ„ λ£¨ν”„λ¥Ό μ‹¤ν–‰ν•κ³ , λ¨λ“  λ§¤λ‹μ €μ μ—…λ°μ΄νΈ λ° κ·Έλ¦¬κΈ°λ¥Ό μ΅°μ¨ν•©λ‹λ‹¤.
* **`GameLoop`**: κ²μ„μ λ©”μΈ λ£¨ν”„λ¥Ό λ‹΄λ‹Ήν•λ©°, `_update`μ™€ `_draw` ν•¨μλ¥Ό ν”„λ μ„λ§λ‹¤ νΈμ¶ν•μ—¬ κ²μ„ λ΅μ§ μ—…λ°μ΄νΈμ™€ ν™”λ©΄ λ λ”λ§μ„ μ§€μ†μ μΌλ΅ μν–‰ν•©λ‹λ‹¤.
* **`Renderer`**: HTML `<canvas>` μ”μ†μ™€ 2D λ λ”λ§ μ»¨ν…μ¤νΈλ¥Ό κ΄€λ¦¬ν•©λ‹λ‹¤. ν™”λ©΄μ„ μ§€μ°κ³  λ°°κ²½μ„ κ·Έλ¦¬λ” λ“± κΈ°λ³Έμ μΈ λ λ”λ§ μ‘μ—…μ„ μ²λ¦¬ν•©λ‹λ‹¤.

### μ£Όμ” κΈ°λ¥ λ§¤λ‹μ €

* **`EventManager`**: κ²μ„ λ‚΄μ—μ„ λ°μƒν•λ” λ¨λ“  'μ‚¬κ±΄'μ„ μ ‘μν•κ³ , μ΄λ¥Ό κµ¬λ…μμ—κ² μ „νν•λ” μ¤‘μ•™ μ§‘μ¤‘μ‹ μ΄λ²¤νΈ μ‹μ¤ν…μ…λ‹λ‹¤. Web Workerλ¥Ό ν™μ©ν•μ—¬ μΌλ¶€ μ΄λ²¤νΈ μ²λ¦¬λ¥Ό λ°±κ·ΈλΌμ΄λ“μ—μ„ μν–‰ν•©λ‹λ‹¤.
* **`GuardianManager`**: κ²μ„ λ°μ΄ν„°μ λ¶λ³€ κ·μΉ™μ„ κ²€μ¦ν•λ” 'μ‘μ€ μ—”μ§„' μ—­ν• μ„ ν•©λ‹λ‹¤. μ λ‹›μ μ²΄λ ¥, ν•΄μƒλ„ μ„¤μ • λ“± μ¤‘μ”ν• κ²μ„ λ°μ΄ν„°κ°€ λ―Έλ¦¬ μ •μλ κ·μΉ™μ„ μ¤€μν•λ”μ§€ ν™•μΈν•©λ‹λ‹¤.
* **`MeasureManager`**: κ²μ„ λ‚΄μ λ¨λ“  ν¬κΈ°, λΉ„μ¨, ν•΄μƒλ„ λ“± μΈ΅μ • κ΄€λ ¨ μ„¤μ •μ„ μ¤‘μ•™μ—μ„ κ΄€λ¦¬ν•©λ‹λ‹¤. λ‹¤λ¥Έ λ§¤λ‹μ €λ“¤μ΄ μΌκ΄€λ μΈ΅μ •κ°’μ„ μ°Έμ΅°ν•κ³  μ—…λ°μ΄νΈν•  μ μλ„λ΅ ν•©λ‹λ‹¤.
* **`MapManager`**: κ²μ„ μ›”λ“μ λ§µ λ°μ΄ν„°, κ·Έλ¦¬λ“, νƒ€μΌ ν¬κΈ° λ° κ²½λ΅ νƒμƒ‰ λ΅μ§μ„ κ΄€λ¦¬ν•©λ‹λ‹¤. `MeasureManager`λ¥Ό ν†µν•΄ λ§µμ μ°¨μ›μ„ λ™μ μΌλ΅ μ¬κ³„μ‚°ν•©λ‹λ‹¤.
* **`UIEngine`**: κ²μ„μ μ‚¬μ©μ μΈν„°νμ΄μ¤(UI) μ”μ†λ¥Ό κ΄€λ¦¬ν•κ³  κ·Έλ¦½λ‹λ‹¤. λ²„νΌ, ν¨λ„ λ“± μ¤λ²„λ μ΄ UIλ¥Ό λ‹΄λ‹Ήν•λ©°, μ‚¬μ©μ μ…λ ¥(λ²„νΌ ν΄λ¦­)μ„ μ²λ¦¬ν•©λ‹λ‹¤.
* **`LayerEngine`**: λ λ”λ§ν•  μ—¬λ¬ λ μ΄μ–΄λ¥Ό λ“±λ΅ν•κ³  κ΄€λ¦¬ν•©λ‹λ‹¤. κ° λ μ΄μ–΄μ `zIndex`μ— λ”°λΌ μ¬λ°”λ¥Έ μμ„λ΅ κ·Έλ ¤μ§€λ„λ΅ ν•μ—¬ λ³µμ΅ν• ν™”λ©΄ κµ¬μ„±μ„ κ°€λ¥ν•κ² ν•©λ‹λ‹¤.
* **`SceneManager`**: κ²μ„μ λ‹¤μ–‘ν• 'μ¥λ©΄' λλ” 'μƒνƒ'(μ: μμ§€ ν™”λ©΄, μ „ν¬ ν™”λ©΄)λ¥Ό λ…Όλ¦¬μ μΌλ΅ κ·Έλ£Ήν™”ν•κ³  κ΄€λ¦¬ν•©λ‹λ‹¤. ν„μ¬ ν™μ„±ν™”λ μ”¬μ— μ†ν• λ§¤λ‹μ €λ“¤μ„ μ—…λ°μ΄νΈν•κ³  κ·Έλ¦¬λ„λ΅ μ§€μ‹ν•©λ‹λ‹¤. **ν™•λ€/μ¶•μ† λ° λ“λκ·Έ λ³€ν™μ€ λ‹΄λ‹Ήν•μ§€ μ•μµλ‹λ‹¤.**
* **`CameraEngine`**: κ²μ„ ν™”λ©΄μ λ·°ν¬νΈλ¥Ό κ΄€λ¦¬ν•©λ‹λ‹¤. ν™•λ€/μ¶•μ†(zoom) λ° μ΄λ™(pan) λ³€ν™μ„ κ³„μ‚°ν•κ³  μΊ”λ²„μ¤ λ λ”λ§ μ»¨ν…μ¤νΈμ— μ μ©ν•©λ‹λ‹¤. `LogicManager`λ΅λ¶€ν„° μ μ•½ μ΅°κ±΄μ„ λ°›μ•„ ν™”λ©΄μ λΉν‹μ„ λ°©μ§€ν•©λ‹λ‹¤.
* **`InputManager`**: λ§μ°μ¤ ν΄λ¦­, λ“λκ·Έ, ν  μ¤ν¬λ΅¤ λ“± μ‚¬μ©μ μ…λ ¥ μ΄λ²¤νΈλ¥Ό κ°μ§€ν•κ³  μ²λ¦¬ν•©λ‹λ‹¤. μ΄λ¥Ό `CameraEngine`μ— μ „λ‹¬ν•μ—¬ ν™”λ©΄ λ³€ν™μ„ μ μ–΄ν•λ©°, UI μ”μ†μ™€μ μ¶©λμ„ λ°©μ§€ν•©λ‹λ‹¤.
* **`LogicManager`**: κ²μ„μ ν•µμ‹¬ λ…Όλ¦¬μ  κ·μΉ™κ³Ό μ μ•½ μ΅°κ±΄μ„ μ •μν•©λ‹λ‹¤. νΉν μΉ΄λ©”λΌμ μ΄λ™ λ° μ¤ λ²”μ„μ— λ€ν• μ μ•½ μ΅°κ±΄μ„ κ³„μ‚°ν•μ—¬ `CameraEngine`μ— μ κ³µν•¨μΌλ΅μ¨, ν™”λ©΄μ— λΉν‹μ΄ μƒκΈ°μ§€ μ•λ„λ΅ λ³΄μ¥ν•©λ‹λ‹¤.
* **`CompatibilityManager`**: κ²μ„μ΄ λ‹¤μ–‘ν• ν™”λ©΄ ν¬κΈ°μ™€ κΈ°κΈ° λ°©ν–¥(κ°€λ΅/μ„Έλ΅)μ— μ μ‘ν•  μ μλ„λ΅ μ§€μ›ν•©λ‹λ‹¤. λ·°ν¬νΈ λ³€κ²½ μ‹ κ²μ„μ ν•΄μƒλ„λ¥Ό λ™μ μΌλ΅ μ΅°μ •ν•μ—¬ μ½ν…μΈ κ°€ μλ¦¬μ§€ μ•λ„λ΅ ν•©λ‹λ‹¤.

---

## π§ ν…μ¤νΈ κ°μ”

κ²μ„μ μ•μ •μ„±κ³Ό κΈ°λ¥μ„±μ„ λ³΄μ¥ν•κΈ° μ„ν•΄ λ‹¤μ–‘ν• μ ν•μ ν…μ¤νΈλ¥Ό μν–‰ν•©λ‹λ‹¤.

### 1. λ‹¨μ„ ν…μ¤νΈ (Unit Tests)

* **λ©μ **: κ° λ§¤λ‹μ € λλ” λ¨λ“μ κ°λ³„ κΈ°λ¥μ΄ μμƒλ€λ΅ μ‘λ™ν•λ”μ§€ κ²€μ¦ν•©λ‹λ‹¤. μΆ…μ†μ„±μ€ λ¨μ(mock) κ°μ²΄λ΅ λ€μ²΄ν•μ—¬ ν…μ¤νΈ λ€μƒμ λ΅μ§λ§ κ²©λ¦¬ν•μ—¬ ν…μ¤νΈν•©λ‹λ‹¤.
* **ν…μ¤νΈ λ€μƒ λ° λ‚΄μ©**:
    * **`RendererTests`**: λ λ”λ¬κ°€ μΊ”λ²„μ¤μ™€ μ»¨ν…μ¤νΈλ¥Ό μ¬λ°”λ¥΄κ² μ΄κΈ°ν™”ν•λ”μ§€ ν™•μΈν•©λ‹λ‹¤.
    * **`GameLoopTests`**: κ²μ„ λ£¨ν”„κ°€ μ‹μ‘/μ •μ§€λκ³  `update`/`draw` μ½λ°±μ„ μ¬λ°”λ¥΄κ² νΈμ¶ν•λ”μ§€ ν™•μΈν•©λ‹λ‹¤.
    * **`EventManagerTests`**: μ΄λ²¤νΈ κµ¬λ…, λ°ν–‰, μ „νκ°€ μ¬λ°”λ¥΄κ² μ‘λ™ν•λ©° Web Workerμ™€μ ν†µμ‹ μ΄ μ›ν™ν•μ§€ ν™•μΈν•©λ‹λ‹¤.
    * **`GuardianManagerTests`**: μ •μλ λ¶λ³€ κ·μΉ™(μ: μ λ‹› μ²΄λ ¥, ν•΄μƒλ„)μ„ μ¬λ°”λ¥΄κ² κ°•μ ν•κ³  μ„λ° μ‹ μ¤λ¥λ¥Ό λ°μƒμ‹ν‚¤λ”μ§€ ν™•μΈν•©λ‹λ‹¤.
    * **`MeasureManagerUnitTests`**: (μ•„μ§ κµ¬ν„λμ§€ μ•μ) `MeasureManager`μ `get`/`set` λ©”μ„λ“κ°€ μΈ΅μ •κ°’μ„ μ¬λ°”λ¥΄κ² λ°ν™ν•κ³  μ„¤μ •ν•λ”μ§€ ν…μ¤νΈν•  μμ •μ…λ‹λ‹¤.
    * **`MapManagerUnitTests`**: (μ•„μ§ κµ¬ν„λμ§€ μ•μ) `MapManager`κ°€ λ§µμ„ μƒμ„±ν•κ³  νƒ€μΌ λ°μ΄ν„°λ¥Ό μ¬λ°”λ¥΄κ² λ°ν™ν•λ”μ§€ ν…μ¤νΈν•  μμ •μ…λ‹λ‹¤.
    * **`UIEngineUnitTests`**: (μ•„μ§ κµ¬ν„λμ§€ μ•μ) `UIEngine`μ΄ UI μ”μ†λ¥Ό μ¬λ°”λ¥΄κ² κ³„μ‚°ν•κ³  κ·Έλ¦¬λ”μ§€ ν…μ¤νΈν•  μμ •μ…λ‹λ‹¤.
    * **`SceneManagerUnitTests`**: μ”¬ λ“±λ΅ λ° μ „ν™, ν„μ¬ μ”¬μ λ§¤λ‹μ € μ—…λ°μ΄νΈ λ° κ·Έλ¦¬κΈ°κ°€ μ¬λ°”λ¥΄κ² μ‘λ™ν•λ”μ§€ ν™•μΈν•©λ‹λ‹¤.
    * **`LogicManagerUnitTests`**: `LogicManager`κ°€ ν„μ¬ μ”¬μ μ½ν…μΈ  ν¬κΈ°, μ¤ μ ν•, ν¬ μ μ•½ μ΅°κ±΄μ„ μ¬λ°”λ¥΄κ² κ³„μ‚°ν•κ³  λ°ν™ν•λ”μ§€ ν™•μΈν•©λ‹λ‹¤.
    * **`CompatibilityManagerUnitTests`**: `CompatibilityManager`κ°€ λ‹¤μ–‘ν• λ·°ν¬νΈ ν¬κΈ°μ™€ λΉ„μ¨μ— λ§μ¶° κ²μ„ ν•΄μƒλ„λ¥Ό μ¬λ°”λ¥΄κ² μ΅°μ •ν•λ”μ§€ ν™•μΈν•©λ‹λ‹¤.

### 2. κ²°ν•¨ μ£Όμ… ν…μ¤νΈ (Fault Injection Tests)

* **λ©μ **: μ‹μ¤ν…μ νΉμ • λ¶€λ¶„μ— μλ„μ μΌλ΅ μ¤λ¥ λλ” μμ™Έμ μΈ μƒν™©μ„ μ£Όμ…ν•μ—¬, ν•΄λ‹Ή λ¨λ“μ΄ μ΄λ¬ν• μƒν™©μ„ μ–Όλ§λ‚ κ²¬κ³ ν•κ² μ²λ¦¬ν•λ”μ§€, λλ” μμƒλ€λ΅ μ‹¤ν¨ν•λ”μ§€ ν™•μΈν•©λ‹λ‹¤.
* **ν…μ¤νΈ λ€μƒ λ° λ‚΄μ©**:
    * **`RendererFaults`**: λ λ”λ§ μ»¨ν…μ¤νΈκ°€ μ ν¨ν•μ§€ μ•μ„ λ• λ λ”λ¬κ°€ μμƒλ€λ΅ μ¤λ¥λ¥Ό μ²λ¦¬ν•λ”μ§€ μ‹λ®¬λ μ΄μ…ν•©λ‹λ‹¤.
    * **`GameLoopFaults`**: κ²μ„ λ£¨ν”„μ `update` λλ” `draw` ν•¨μμ—μ„ μλ„μ μΈ μ¤λ¥κ°€ λ°μƒν•  λ• μ‹μ¤ν…μ λ°μ‘μ„ ν…μ¤νΈν•©λ‹λ‹¤.
    * **`EventManagerFaults`**: μ΄λ²¤νΈ κµ¬λ…μ μ½λ°±μ—μ„ μ¤λ¥κ°€ λ°μƒν•κ±°λ‚ Web Workerκ°€ μΆ…λ£λ ν›„ μ΄λ²¤νΈλ¥Ό λ°ν–‰ν•  λ•μ λ™μ‘μ„ ν…μ¤νΈν•©λ‹λ‹¤.
    * **`GuardianManagerFaults`**: μ ν¨ν•μ§€ μ•κ±°λ‚ λ„λ½λ κ²μ„ λ°μ΄ν„°λ¥Ό `GuardianManager`μ— μ „λ‹¬ν–μ„ λ• μ¤λ¥λ¥Ό μ¬λ°”λ¥΄κ² λ°μƒμ‹ν‚¤λ”μ§€ ν…μ¤νΈν•©λ‹λ‹¤.
    * **`SceneManagerFaults`**: μ΅΄μ¬ν•μ§€ μ•λ” μ”¬μΌλ΅ μ „ν™μ„ μ‹λ„ν•κ±°λ‚, μ”¬μ΄ μ„¤μ •λμ§€ μ•μ€ μƒνƒμ—μ„ μ—…λ°μ΄νΈ/κ·Έλ¦¬κΈ° νΈμ¶ μ‹ μ‹μ¤ν…μ λ°μ‘μ„ ν…μ¤νΈν•©λ‹λ‹¤.
    * **`LogicManagerFaults`**: `MeasureManager` λλ” `SceneManager`λ΅λ¶€ν„° μ ν¨ν•μ§€ μ•κ±°λ‚ λ„λ½λ λ°μ΄ν„°λ¥Ό λ°›μ•μ„ λ• `LogicManager`κ°€ μ–΄λ–»κ² μ‘λ™ν•λ”μ§€(μ: κ²½κ³  λ°ν–‰, κΈ°λ³Έκ°’ λ°ν™) ν…μ¤νΈν•©λ‹λ‹¤.
    * **`CompatibilityManagerFaults`**: `MeasureManager`λ‚ `Renderer` λ“±μ μΆ…μ†μ„± λ©”μ„λ“κ°€ λ„λ½λκ±°λ‚ μ ν¨ν•μ§€ μ•μ€ μƒνƒμΌ λ• `CompatibilityManager`κ°€ μ–΄λ–»κ² λ™μ‘ν•λ”μ§€(μ: μ¶©λ λ°©μ§€) ν…μ¤νΈν•©λ‹λ‹¤.

### 3. ν†µν•© ν…μ¤νΈ (Integration Tests)

* **λ©μ **: μ—¬λ¬ λ§¤λ‹μ €λ‚ λ¨λ“μ΄ ν•¨κ» μ‘λ™ν•  λ• κΈ°λ¥μ΄ μ¬λ°”λ¥΄κ² μν–‰λλ”μ§€ κ²€μ¦ν•©λ‹λ‹¤. μ‹¤μ  κ²μ„ ν™κ²½κ³Ό μ μ‚¬ν•κ² κµ¬μ„±ν•μ—¬ λ§¤λ‹μ € κ°„μ μƒνΈμ‘μ©μ„ ν…μ¤νΈν•©λ‹λ‹¤.
* **ν…μ¤νΈ λ€μƒ λ° λ‚΄μ©**:
    * **`MeasureManagerIntegrationTest`**: `MeasureManager`μ κ°’μ΄ λ³€κ²½λ  λ• `UIEngine`κ³Ό `MapManager`κ°€ μ΄λ¥Ό μ¬λ°”λ¥΄κ² λ°μν•μ—¬ μμ‹ λ“¤μ ν¬κΈ°μ™€ μ„μΉλ¥Ό μ¬μ΅°μ •ν•λ”μ§€ ν™•μΈν•©λ‹λ‹¤.

---

**ν…μ¤νΈ μ‹¤ν–‰ λ°©λ²•**:

1.  λ¨λ“  λ³€κ²½ μ‚¬ν•­μ„ μ €μ¥ν•©λ‹λ‹¤.
2.  λ΅μ»¬ μ›Ή μ„λ²„(μ: `python3 -m http.server 8000`)λ¥Ό ν†µν•΄ κ²μ„μ„ μ‹¤ν–‰ν•©λ‹λ‹¤.
3.  λΈλΌμ°μ €μ—μ„ `http://localhost:8000/debug.html`μ— μ ‘μ†ν•©λ‹λ‹¤.
4.  ν™”λ©΄ μ™Όμ½ μƒλ‹¨μ— μλ” λ””λ²„κ·Έ ν¨λ„μ—μ„ κ° ν…μ¤νΈμ— ν•΄λ‹Ήν•λ” λ²„νΌμ„ ν΄λ¦­ν•μ—¬ μ½μ†”μ—μ„ κ²°κ³Όλ¥Ό ν™•μΈν•©λ‹λ‹¤.
